# 管理者ダッシュボード機能 - 要件定義書

## 概要

Basic認証を使用した管理者機能を実装し、お問い合わせの管理と回答機能を提供します。

## 要件

### 要件1: Basic認証の実装

**ユーザーストーリー:** 管理者として、システムに安全にアクセスしたいので、認証機能が必要

#### 受入基準

1. WHEN 管理者が `/admin` にアクセス THEN Basic認証のダイアログが表示される
2. WHEN 正しいユーザー名とパスワードを入力 THEN 管理者ダッシュボードにアクセスできる
3. WHEN 間違った認証情報を入力 THEN アクセスが拒否される
4. WHEN 認証なしで管理者機能にアクセス THEN Basic認証が要求される

### 要件2: 管理者ダッシュボードの作成

**ユーザーストーリー:** 管理者として、システムの概要を把握したいので、ダッシュボード画面が必要

#### 受入基準

1. WHEN 管理者がダッシュボードにアクセス THEN メニューが表示される
2. WHEN ダッシュボードが表示される THEN 「お問い合わせ管理」メニューが表示される
3. WHEN ダッシュボードが表示される THEN お問い合わせの統計情報が表示される
4. WHEN 「お問い合わせ管理」をクリック THEN お問い合わせ一覧画面に遷移する

### 要件3: 管理者用お問い合わせ一覧画面

**ユーザーストーリー:** 管理者として、すべてのお問い合わせを確認したいので、一覧画面が必要

#### 受入基準

1. WHEN 管理者がお問い合わせ一覧にアクセス THEN すべてのお問い合わせが表示される
2. WHEN お問い合わせ一覧が表示される THEN 以下の情報が表示される
   - お問い合わせ日時
   - お名前
   - お問い合わせ区分
   - 回答状況（未回答/回答済み）
3. WHEN お問い合わせ項目をクリック THEN 詳細画面に遷移する
4. WHEN 未回答のお問い合わせをクリック THEN 回答作成画面に遷移する

### 要件4: お問い合わせ回答機能

**ユーザーストーリー:** 管理者として、お問い合わせに回答したいので、回答作成画面が必要

#### 受入基準

1. WHEN 管理者が回答作成画面にアクセス THEN お問い合わせ内容が表示される
2. WHEN 回答作成画面が表示される THEN 回答入力フォームが表示される
3. WHEN 管理者が回答を入力して送信 THEN 回答がデータベースに保存される
4. WHEN 回答が保存される THEN お客様に回答メールが送信される
5. WHEN 回答送信が完了 THEN お問い合わせ一覧画面に戻る

### 要件5: 回答状況の管理

**ユーザーストーリー:** 管理者として、どのお問い合わせに回答済みかを把握したい

#### 受入基準

1. WHEN お問い合わせに回答が作成される THEN 回答状況が「回答済み」に更新される
2. WHEN お問い合わせ一覧が表示される THEN 回答状況が視覚的に区別される
3. WHEN 回答済みのお問い合わせをクリック THEN 詳細画面で回答内容も表示される
4. WHEN 複数回答がある場合 THEN すべての回答が時系列で表示される

### 要件6: セキュリティ要件

**ユーザーストーリー:** システムとして、管理者機能への不正アクセスを防ぎたい

#### 受入基準

1. WHEN 管理者機能の全てのページにアクセス THEN Basic認証が必要
2. WHEN セッションが無効になる THEN 再度認証が要求される
3. WHEN 認証情報が環境変数で管理される THEN セキュリティが確保される
4. WHEN 管理者機能にアクセス THEN HTTPSでの通信が推奨される