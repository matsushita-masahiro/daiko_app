# 実装タスクリスト

- [ ] 1. Basic認証の実装
  - [x] 1.1 ApplicationControllerに認証メソッド追加
    - authenticate_admin メソッドの実装
    - 環境変数での認証情報管理
    - _要件: 1.1, 1.2, 1.3, 1.4, 6.1, 6.3_

  - [x] 1.2 Admin::BaseControllerの作成
    - 管理者機能の基底クラス作成
    - before_action での認証要求
    - 管理者専用レイアウトの指定
    - _要件: 1.1, 6.1_

- [x] 2. ルーティングの追加
  - config/routes.rb に admin namespace を追加
  - dashboard, inquiries, answers のルーティング設定
  - _要件: 2.1, 3.1, 4.1_

- [ ] 3. Admin::DashboardControllerの実装
  - [x] 3.1 コントローラーの作成
    - Admin::BaseController を継承
    - index アクションの実装
    - _要件: 2.1, 2.2_

  - [x] 3.2 統計情報の取得
    - 総お問い合わせ数の取得
    - 未回答お問い合わせ数の取得
    - 回答済みお問い合わせ数の取得
    - _要件: 2.3_

- [ ] 4. Admin::InquiriesControllerの実装
  - [x] 4.1 コントローラーの作成
    - Admin::BaseController を継承
    - index アクションの実装
    - show アクションの実装
    - _要件: 3.1, 3.3_

  - [x] 4.2 お問い合わせ一覧の取得
    - 全お問い合わせの取得
    - 回答状況の判定
    - 日時順でのソート
    - _要件: 3.1, 3.2, 5.2_

- [ ] 5. Admin::AnswersControllerの実装
  - [x] 5.1 コントローラーの作成
    - Admin::BaseController を継承
    - new アクションの実装
    - create アクションの実装
    - _要件: 4.1, 4.2, 4.3_

  - [x] 5.2 回答保存とメール送信
    - 回答データの保存
    - お客様への回答メール送信
    - 回答完了後のリダイレクト
    - _要件: 4.3, 4.4, 4.5_

- [ ] 6. 管理者レイアウトの作成
  - [x] 6.1 admin.html.erb レイアウトファイル作成
    - 管理者専用のヘッダー
    - ナビゲーションメニュー
    - 管理者用のスタイル読み込み
    - _要件: 2.1, 2.2_

- [ ] 7. ダッシュボード画面の作成
  - [x] 7.1 admin/dashboard/index.html.erb の作成
    - 統計情報の表示
    - お問い合わせ管理メニューの配置
    - ダッシュボードのレイアウト
    - _要件: 2.1, 2.2, 2.3, 2.4_

- [ ] 8. お問い合わせ一覧画面の作成
  - [x] 8.1 admin/inquiries/index.html.erb の作成
    - お問い合わせ一覧テーブルの作成
    - 回答状況の視覚的表示
    - 詳細画面へのリンク
    - _要件: 3.1, 3.2, 3.3, 5.2_

  - [x] 8.2 admin/inquiries/show.html.erb の作成
    - お問い合わせ詳細の表示
    - 回答履歴の表示
    - 回答作成画面へのリンク
    - _要件: 3.3, 5.3, 5.4_

- [ ] 9. 回答作成画面の作成
  - [x] 9.1 admin/answers/new.html.erb の作成
    - お問い合わせ内容の表示
    - 回答入力フォームの作成
    - 送信ボタンの配置
    - _要件: 4.1, 4.2_

- [ ] 10. 管理者用スタイルの実装
  - [x] 10.1 admin.scss ファイルの作成
    - 管理者レイアウト用のスタイル
    - テーブルスタイルの実装
    - ボタンとフォームのスタイル
    - レスポンシブ対応
    - _要件: 2.1, 3.2, 4.2_

- [ ] 11. 回答状況管理の実装
  - [ ] 11.1 回答状況判定ヘルパーの作成
    - 未回答/回答済みの判定メソッド
    - 状況表示用のヘルパーメソッド
    - _要件: 5.1, 5.2_

- [ ] 12. 環境変数の設定
  - [x] 12.1 .env ファイルの更新
    - ADMIN_USERNAME の設定
    - ADMIN_PASSWORD の設定
    - 開発環境用の認証情報
    - _要件: 1.2, 6.3_

- [ ] 13. エラーハンドリングの実装
  - [ ] 13.1 認証エラーの処理
    - Basic認証失敗時の適切な応答
    - 認証情報不正時の処理
    - _要件: 1.3, 6.1_

  - [ ] 13.2 データエラーの処理
    - 存在しないお問い合わせへのアクセス処理
    - 回答保存失敗時の処理
    - メール送信失敗時の処理
    - _要件: 4.3, 4.4_

- [ ] 14. 統合テストの実装
  - [ ] 14.1 認証テストの作成
    - Basic認証の成功/失敗ケース
    - 認証なしでのアクセス拒否テスト
    - _要件: 1.1, 1.2, 1.3, 6.1_

  - [ ] 14.2 管理者機能テストの作成
    - ダッシュボード表示テスト
    - お問い合わせ一覧表示テスト
    - 回答機能テスト
    - _要件: 2.1, 3.1, 4.1, 4.3, 4.4_